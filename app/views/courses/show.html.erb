<h5 aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="<%= root_path %>"
                                class="link-dark">Home</a></li>
    <li class="breadcrumb-item"><a href="<%= courses_path %>"
                                class="link-dark"><%= Course.model_name.human count: 2 %></a></li>
    <li class="breadcrumb-item active text-secondary" aria-current="page"><%=@course.name %></li>
  </ol>
  <%= link_to 'Meu Perfil', user_profile_path, class: 'btn btn-primary' %>
  
</h5>


<h3><%= @course.name %></h3>
<dl>
  <dt><%= Course.human_attribute_name(:description)%></dt>
  <dd><%= @course.description %></dd>
  <% if @course.instructor %>
    <dt><%= Course.human_attribute_name(:instructor)%></dt>
    <dd><%= @course.instructor %></dd>
  <% end %>
  <dt>Capa: </dt>
  <dd>
     <% if @course.cover.attached? %>
        <%= image_tag @course.cover, size:'360x360' %>
      <% else %>
        <%= image_tag 'covers/404.jpg', size:'360x360' %>
      <% end %>
  </dd>
  <% if @course.requirements %>
    <dt><%= Course.human_attribute_name(:requirements) %>: </dt>
  <% @course.requirements.each do |requirement| %>
    <dd><%= requirement.name %></dd>
   <% end %>
  <% end %>
</dl>
<br>

<% if(current_user&.own_course? @course) %>


  <div>
    <h3><%= "Progesso do Curso: #{@course.lessons.check.count}/#{@course.lessons.count}"%></h3>
  </div>
  <div>
    <table class="table table-bordered">
      <thead class="table-dark">
        <tr>
          <th scope="col"><%= Lesson.human_attribute_name(:name) %></th>
          <th scope="col"><%= Lesson.human_attribute_name(:description) %></th>
          <th scope="col"><%= Lesson.human_attribute_name(:done) %></th>
        </tr>
        </thead>
      <tbody>
        <% @course.lessons.each do |lesson| %>
          <tr class="textrubocop">
            <td><%= link_to lesson.name, course_lesson_path(@course, lesson), class:"btn btn-light"  %></td>
            <td><%= lesson.description%></td>
            <td><%= lesson.done%></td>
          </tr>
        <% end %>
        <% @course.text_lessons.each do |lesson| %>
          <tr class="textrubocop">
            <td><%= link_to lesson.name, course_text_lesson_path(@course, lesson), class:"btn btn-light"  %></td>
            <td><%= lesson.description%></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

<% else %>

  <%= link_to t('buttons.buy'),
      new_order_path(course: @course),
      class: 'btn btn-primary' %>
<div>
  <table class="table table-bordered">
    <thead class="table-dark">
      <tr>
        <th scope="col"><%= Lesson.human_attribute_name(:name) %></th>
        <th scope="col"><%= Lesson.human_attribute_name(:description) %></th>
      </tr>
      </thead>
    <tbody>
      <% @course.lessons.each do |lesson| %>
        <tr class="text">
          <td><%= link_to lesson.name, course_lesson_path(@course, lesson), class:"btn btn-light"  %></td>
          <td><%= lesson.description%></td>
        </tr>
      <% end %>
      <% @course.text_lessons.each do |lesson| %>
        <tr class="text">
          <td><%= link_to lesson.name, course_text_lesson_path(@course, lesson), class:"btn btn-light"  %></td>
          <td><%= lesson.description%></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<% end %>
